<!doctype html>
<head>
  <title>{% block title %}{% endblock %} - Obras Públicas</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  {% block head %}{% endblock %}

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.css">

  <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  <script src="https://kit.fontawesome.com/b634328538.js" crossorigin="anonymous"></script>
  <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

  {% block scripts %}{% endblock %}
</head>

<body>
  <nav>
    <button class="openbtn" onclick="openCloseNav()">☰</button>  
  </nav>

  
  <div id="main">
    <div class="sidebar border-end bg-white" id="mySidebar" style="white-space: nowrap;">
      <a href="{{ url_for('index') }}"><h3>Obras Públicas</h3></a>
      {% if g.user %}
        {% if g.user['user_type'] == 'admin' %}
          <a><b>Administración</b></a>
          <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('auth.register') }}">Crear Usuario</a>
        {% endif %}
        <a><b>Información de Red</b></a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('inf_red.createInfRed') }}">Registrar Solicitud</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('inf_red.indexInfRed') }}">Ver Tabla</a>
        
        <a><b>Gestión de IP Madre</b></a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='ver_todo') }}">Ver Todo</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='pend_ip') }}">Pendiente IP Madre</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='pend_oc') }}">Pendiente OC de Diseño</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='diseno') }}">Gestión de Diseño</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='presupuesto') }}">Gestión de Presupuesto</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.indexPresupuesto', option='convenio') }}">Gestión de Convenio y Pago</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('presupuesto.importWebpo') }}">Importar WebPO</a>

        <a><b>Reportes</b></a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.objetivos') }}">Dashboard Objetivos</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.proyectos_gestionados_2024') }}">Proyectos Gestionados</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.gestion_presupuestal') }}">Gestión Presupuestal</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.tiempos_inf_red') }}">Tiempos Promedio</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.desestimados') }}">Desestimados</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.viewDepartamentos') }}">Mapa Departamentos</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.viewAll') }}">Mapa Proyectos</a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('reportes.export') }}">Exportar</a>

        <hr class="hr" />
        <a><b>{{ g.user['username'] }}</b></a>
        <a style="font-size: 16px; padding-left: 32px;" href="{{ url_for('auth.logout') }}">Cerrar Sesión</a>

      {% else %}
        <a href="{{ url_for('auth.login') }}">Iniciar Sesión</a>
      {% endif %}
    </div>

    <section class="content">
      <header>
        {% block header %}{% endblock %}
      </header>
      {% for message in get_flashed_messages() %}
        <div class="flash">{{ message }}</div>
      {% endfor %}
      {% block content %}{% endblock %}
    </section>
  </div>

  <script>
    function openCloseNav() {
      if (document.getElementById("mySidebar").style.width == "250px") {
        document.getElementById("mySidebar").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
      } else {
        document.getElementById("mySidebar").style.width = "250px";
        /*document.getElementById("main").style.marginLeft = "250px";*/
      }
    }
  </script>
  
</body>